<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: READ ME</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">READ ME</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md5"></a> </p>
<h1><a class="anchor" id="autotoc_md6"></a>
Todo</h1>
<ul>
<li>Create new repo by copying this repo delete all .git files then init folder</li>
</ul>
<h1><a class="anchor" id="autotoc_md7"></a>
Install</h1>
<h1><a class="anchor" id="autotoc_md8"></a>
Hosts</h1>
<ul>
<li><a href="http://domain/deploy/index">http://domain/deploy/index</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md9"></a>
Databases</h1>
<ul>
<li><a href="http://domain/init/index">http://domain/init/index</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md10"></a>
Test pages to play around with</h1>
<ul>
<li><a href="http://domain/test/index">http://domain/test/index</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md11"></a>
Shared assets</h1>
<ul>
<li><a href="http://domain/shared/index">http://domain/shared/index</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md12"></a>
Imap</h1>
<ul>
<li>sudo apt-get install php7.0-imap</li>
</ul>
<h1><a class="anchor" id="autotoc_md13"></a>
Whitelist Ips</h1>
<ul>
<li>MSN JMRP <a href="https://sendersupport.olc.protection.outlook.com/snds/data.aspx">https://sendersupport.olc.protection.outlook.com/snds/data.aspx</a></li>
<li>MSN SNDS <a href="https://sendersupport.olc.protection.outlook.com/snds/">https://sendersupport.olc.protection.outlook.com/snds/</a></li>
<li>MSN Support <a href="https://support.microsoft.com/en-us/supportrequestform/8ad563e3-288e-2a61-8122-3ba03d6b8d75">https://support.microsoft.com/en-us/supportrequestform/8ad563e3-288e-2a61-8122-3ba03d6b8d75</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md14"></a>
bake</h1>
<div class="fragment"><div class="line">sudo ./bake.sh settings Settings</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md15"></a>
Return specific fields in records</h1>
<div class="fragment"><div class="line">$conditions = array(</div>
<div class="line">    &#39;table&#39;=&gt;&#39;migrate_project_details&#39;,</div>
<div class="line">    &#39;wheres&#39;=&gt;$wheres,</div>
<div class="line">    &#39;field_names&#39;=&gt;array(&#39;name&#39;,&#39;description&#39;)</div>
<div class="line">);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md16"></a>
Sandbox db set in Db class</h2>
<div class="fragment"><div class="line">public function sandbox() {</div>
<div class="line"> </div>
<div class="line">    if ($_SERVER[&#39;HTTP_HOST&#39;] === &#39;sandbox.typekoce.com&#39;) {</div>
<div class="line"> </div>
<div class="line">        //$this -&gt; result[&#39;password&#39;] = &#39;r00taccess&#39;;</div>
<div class="line">        </div>
<div class="line">        $this -&gt; result[&#39;password&#39;] = &#39;&#39;;</div>
<div class="line"> </div>
<div class="line">    }//die();</div>
<div class="line"> </div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md17"></a>
Note</h1>
<ul>
<li>The route paramater in $data['slug'] may cause issues with array variable.</li>
</ul>
<h2><a class="anchor" id="autotoc_md18"></a>
Sub Modules</h2>
<p>*** Note clone into build &amp; remove .git folders &amp; move to lib ***</p>
<p>** Office 365</p><ul>
<li><a href="https://github.com/Typekoce/Groups-API-Office-Add-in-PHP-Sample.git">https://github.com/Typekoce/Groups-API-Office-Add-in-PHP-Sample.git</a></li>
</ul>
<p>** Facebook ** Note not using submodules</p><ul>
<li>git submodule add <a href="https://github.com/facebook/php-graph-sdk.git">https://github.com/facebook/php-graph-sdk.git</a> /app/lib/facebook</li>
</ul>
<p>** Facebook call back</p><ul>
<li><a href="http://domain/signin/update">http://domain/signin/update</a></li>
</ul>
<h2><a class="anchor" id="autotoc_md19"></a>
Admin Mode</h2>
<div class="fragment"><div class="line">public function admin_before($data,$options){</div>
<div class="line"> </div>
<div class="line">    $id = array(&#39;bereavement&#39;,&#39;id&#39;);</div>
<div class="line">    </div>
<div class="line">    $userid = $this-&gt;session-&gt;read($id);</div>
<div class="line">    </div>
<div class="line">    if($userid == 1){</div>
<div class="line">        </div>
<div class="line">        $data = $this-&gt;admin_before_flash($data, $options);</div>
<div class="line">        </div>
<div class="line">    } else {</div>
<div class="line">        </div>
<div class="line">        </div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    return $data;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">public function admin_before_flash($data,$options){</div>
<div class="line">    </div>
<div class="line">    $id = $data[&#39;id&#39;];</div>
<div class="line"> </div>
<div class="line">    $url = array(</div>
<div class="line">        $data[&#39;slug&#39;][&#39;route&#39;][&#39;model&#39;],</div>
<div class="line">        &#39;read&#39;,</div>
<div class="line">        $id</div>
<div class="line">    );</div>
<div class="line">    </div>
<div class="line">    </div>
<div class="line">    $url = $this-&gt;surl($url);</div>
<div class="line">    </div>
<div class="line">    $options = $this -&gt; options($options, &#39;protocol&#39;, &#39;HTTPS&#39;);</div>
<div class="line">    </div>
<div class="line">    $url = $this-&gt;html-&gt;link($url,$options);</div>
<div class="line">    </div>
<div class="line">    $attr = array(</div>
<div class="line">        &#39;href&#39;=&gt;$url,</div>
<div class="line">        //&#39;target&#39;=&gt;&#39;_blank&#39;</div>
<div class="line">    );</div>
<div class="line">    </div>
<div class="line">    $attr = $this-&gt;attributes($attr);</div>
<div class="line">    </div>
<div class="line">    $options = $this-&gt;options($options, &#39;attr&#39;, $attr);</div>
<div class="line">    </div>
<div class="line">    $txt = &#39;You are in administrator mode&#39;;</div>
<div class="line">    </div>
<div class="line">    $msg = $this-&gt;html-&gt;hyper($txt,$options);</div>
<div class="line">    </div>
<div class="line">    $flash = &#39;info&#39;;</div>
<div class="line">                    </div>
<div class="line">    $data = $this-&gt;flash($data,$msg,$flash);</div>
<div class="line"> </div>
<div class="line">    </div>
<div class="line">    return $data;</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md20"></a>
Git Remove submodule</h2>
<div class="fragment"><div class="line">rm -R path/to/submodule</div>
<div class="line"> </div>
<div class="line">Edit: </div>
<div class="line">./git/config</div>
<div class="line">.gitmodules</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md21"></a>
JsMVC setup</h2>
<p>** Loading $data via JavaScript </p><div class="fragment"><div class="line">$data = $this-&gt;otherworld($data, $options);</div>
<div class="line"> </div>
<div class="line">$options = $this-&gt;options($options, &#39;dynabase&#39;, &#39;/theme/businessplan/js/&#39;);</div>
<div class="line"> </div>
<div class="line">$data = $this-&gt;smodelfn($data,$models,&#39;home&#39;,&#39;dynamic&#39;,$options);</div>
<div class="line"> </div>
<div class="line">            </div>
<div class="line">$options = $this-&gt;options($options, &#39;dynaroute&#39;, array(&#39;app&#39;));</div>
<div class="line"> </div>
<div class="line">$data = $this-&gt;smodelfn($data,$models,&#39;home&#39;,&#39;dynamics&#39;,$options);</div>
</div><!-- fragment --> <h2><a class="anchor" id="autotoc_md22"></a>
JsMVC pass attional data</h2>
<div class="fragment"><div class="line">public function otherworld($data,$options){</div>
<div class="line">    </div>
<div class="line">    $datas = array();</div>
<div class="line">    </div>
<div class="line">    $datas = $this-&gt;sdata($datas, &#39;route&#39;, &#39;simple&#39;);</div>
<div class="line">    </div>
<div class="line">    $data = $this-&gt;sdata($data, __FUNCTION__, $datas);</div>
<div class="line">    </div>
<div class="line">    return $data;</div>
<div class="line">}</div>
</div><!-- fragment --><ul>
<li>Controller</li>
</ul>
<div class="fragment"><div class="line">var cont = {};</div>
<div class="line"> </div>
<div class="line">cont = app.control(&#39;dashboard&#39;,cont);</div>
<div class="line"> </div>
<div class="line">app.controller(cont);</div>
<div class="line"> </div>
<div class="line">model = app.model(&#39;dashboard&#39;,model);</div>
</div><!-- fragment --><ul>
<li>Model <div class="fragment"><div class="line">model.max = 20;</div>
<div class="line"> </div>
<div class="line">model.selects = [];</div>
<div class="line"> </div>
<div class="line">model.main = function(){</div>
<div class="line"> </div>
<div class="line">};</div>
</div><!-- fragment --></li>
<li>App <div class="fragment"><div class="line">var app = {};</div>
<div class="line"> </div>
<div class="line">app.data = JSON.parse(&#39;mdata&#39;);</div>
<div class="line"> </div>
<div class="line">app.model = function(name,model){</div>
<div class="line">    </div>
<div class="line">    model.model = name;</div>
<div class="line">    </div>
<div class="line">    model.main();</div>
<div class="line">    </div>
<div class="line">    return model;</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">app.control = function(name,cont){</div>
<div class="line">    </div>
<div class="line">    cont.directive = name;</div>
<div class="line">    </div>
<div class="line">    return cont;</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">app.controller = function(con){</div>
<div class="line">        </div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">app.main = function() {</div>
<div class="line"> </div>
<div class="line">    prettyBug(app);</div>
<div class="line">        </div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">window.onload = function() {</div>
<div class="line"> </div>
<div class="line">    app.main();</div>
<div class="line">    </div>
<div class="line">};</div>
</div><!-- fragment --></li>
</ul>
<h2><a class="anchor" id="autotoc_md23"></a>
Thead</h2>
<div class="fragment"><div class="line">public function thead($data, $options) {</div>
<div class="line"> </div>
<div class="line">    $rs = array( </div>
<div class="line">        array(&#39;title&#39; =&gt; &#39;Type&#39;, &#39;icon&#39; =&gt; &#39;file-text&#39;),</div>
<div class="line">        array(&#39;title&#39; =&gt; &#39;Title&#39;, &#39;icon&#39; =&gt; &#39;file-text&#39;),</div>
<div class="line">        array(&#39;title&#39; =&gt; &#39;Date&#39;, &#39;icon&#39; =&gt; &#39;file-text&#39;), </div>
<div class="line">    );</div>
<div class="line"> </div>
<div class="line">    $data = $this -&gt; spartial($data, __FUNCTION__, $rs);</div>
<div class="line"> </div>
<div class="line">    return $data;</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md24"></a>
Conditions passed to $data array</h2>
<p>** Load method via model call</p>
<div class="fragment"><div class="line">$options = $this-&gt;options($options, &#39;conditions&#39;, __FUNCTION__);</div>
<div class="line"> </div>
<div class="line">$data = $this-&gt;conditions($conditions, $data, $options);</div>
<div class="line"> </div>
<div class="line">$data = $models[&#39;picturebox&#39;]-&gt;conditions($conditions, $data, $options);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md25"></a>
GitHub setup</h2>
<ul>
<li>Change from HTTP to SSH <div class="fragment"><div class="line">git remote set-url origin git@github.com:&lt;Username&gt;/&lt;Project&gt;.git</div>
</div><!-- fragment --></li>
</ul>
<h2><a class="anchor" id="autotoc_md26"></a>
Generic Request Object</h2>
<div class="fragment"><div class="line">* Initial abstraction for making PUT, POST, GET, ETC Requests</div>
<div class="line"> </div>
<div class="line">OpengraphModel-&gt;chew($data,$options);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md27"></a>
Mysql reset priveleges</h2>
<ul>
<li>If Error 2003 try changing from localhost to 127.0.0.1</li>
</ul>
<div class="fragment"><div class="line">$ sudo mysql -u root # I had to use &quot;sudo&quot; since is new installation</div>
<div class="line"> </div>
<div class="line">mysql&gt; USE mysql;</div>
<div class="line">mysql&gt; UPDATE user SET plugin=&#39;mysql_native_password&#39; WHERE User=&#39;root&#39;;</div>
<div class="line">mysql&gt; FLUSH PRIVILEGES;</div>
<div class="line">mysql&gt; exit;</div>
<div class="line"> </div>
<div class="line">$ service mysql restart</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md28"></a>
Nginx Set-Up</h2>
<div class="fragment"><div class="line">server {</div>
<div class="line"> </div>
<div class="line">    listen 80;</div>
<div class="line">    </div>
<div class="line">    root /var/www/typekoce/public/;</div>
<div class="line">    </div>
<div class="line">    index index.html index.php;</div>
<div class="line">    </div>
<div class="line">    server_name sandbox.typekoce.com; </div>
<div class="line"> </div>
<div class="line">    # conditional rewrite for zee pretty URLS</div>
<div class="line">    if (!-e $request_filename) {</div>
<div class="line">            rewrite ^/(.+)$ /index.php?url=$1 last;</div>
<div class="line">            break;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    # Serve cakePHP files</div>
<div class="line">    location ~ \.php$ {</div>
<div class="line">    # With php5-fpm:</div>
<div class="line">    ## UPDATE PHP VERSION##</div>
<div class="line">    fastcgi_pass unix:/run/php/php7.2-fpm.sock;</div>
<div class="line">    fastcgi_index index.php;</div>
<div class="line">    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;</div>
<div class="line">        fastcgi_read_timeout 180;</div>
<div class="line">    include fastcgi_params;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    location ~ \.php/ {</div>
<div class="line">    include fastcgi_params;</div>
<div class="line">    fastcgi_split_path_info ^(.+\.php)(/.*)$;</div>
<div class="line">    fastcgi_param PATH_INFO $fastcgi_path_info;</div>
<div class="line">    fastcgi_param PATH_TRANSLATED $document_root$fastcgi_path_info;</div>
<div class="line">    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;</div>
<div class="line">    fastcgi_pass unix:/var/run/php5-fpm.sock;</div>
<div class="line">   }</div>
<div class="line"> </div>
<div class="line">    # Zee favicon</div>
<div class="line">    location = /favicon.ico {</div>
<div class="line">    log_not_found off;  </div>
<div class="line">    access_log off;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    # Moar robots pl0x</div>
<div class="line">    location = /robots.txt {</div>
<div class="line">    log_not_found off;</div>
<div class="line">    access_log off;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">    # redirect server error pages to the static page /50x.html</div>
<div class="line">    error_page 500 502 503 504 /50x.html;</div>
<div class="line">    location = /50x.html {</div>
<div class="line">    root /usr/share/nginx/html;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    # deny access to certain none web files</div>
<div class="line">    location ~ /(\.ht|\.user.ini|\.git|\.hg|\.bzr|\.svn) {</div>
<div class="line">    deny all;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    # serve zee static content fast</div>
<div class="line">    location ~ ^/(img|cjs|ccss)/ {</div>
<div class="line">    access_log off;</div>
<div class="line">    expires 7d;</div>
<div class="line">    add_header Cache-Control public;</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md29"></a>
How to use this framework</h2>
<ul>
<li>When testing session close down browser</li>
</ul>
<h1><a class="anchor" id="autotoc_md30"></a>
Automatic page creation</h1>
<p>1.</p>
<ul>
<li>Make these directories writable</li>
<li>app/models</li>
<li>app/controllers</li>
<li>app/views</li>
</ul>
<ol type="1">
<li>To auto-create new page go to <a href="http://yourdomain.com/scaffold/index/example">http://yourdomain.com/scaffold/index/example</a></li>
<li>This will automatically build new pages via the scaffold functionality.</li>
</ol>
<ul>
<li>Scaffold pages</li>
<li>index</li>
<li>create</li>
<li>read</li>
<li>update</li>
<li>delete</li>
<li>modify</li>
<li>update</li>
<li>login</li>
</ul>
<ol type="1">
<li>Scaffold library <a href="http://sandbox.typekoce.com/scaffold/library/baki">http://sandbox.typekoce.com/scaffold/library/baki</a></li>
</ol>
<ul>
<li>Orders.php saved to app/lib/baki</li>
</ul>
<h2><a class="anchor" id="autotoc_md31"></a>
Template page</h2>
<div class="fragment"><div class="line">public function sample($data, $models, $options) {</div>
<div class="line"> </div>
<div class="line">    if (isset($data[&#39;directive&#39;]) &amp;&amp; $data[&#39;directive&#39;] === __FUNCTION__) {</div>
<div class="line"> </div>
<div class="line">        $h1 = __FUNCTION__;</div>
<div class="line">        </div>
<div class="line">        $data = $this -&gt; sheader($data, &#39;title&#39;, &quot;cv&quot;);</div>
<div class="line"> </div>
<div class="line">        $data = $this -&gt; template($data, &#39;h1&#39;, $h1);</div>
<div class="line"> </div>
<div class="line">        $h2 = &#39;Enter contact details below&#39;;</div>
<div class="line"> </div>
<div class="line">        $data = $this -&gt; template($data, &#39;h2&#39;, $h2);</div>
<div class="line">        </div>
<div class="line">        //$data = $this -&gt; nav($data, $options);</div>
<div class="line"> </div>
<div class="line">        //$data = $this -&gt; side($data, $options);</div>
<div class="line"> </div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    return $data;</div>
<div class="line"> </div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md32"></a>
Breadcrumbs</h2>
<div class="fragment"><div class="line">$bread = array(</div>
<div class="line">    array(&#39;title&#39;=&gt;&#39;add&#39;,&#39;url&#39;=&gt;array(&#39;companies&#39;,&#39;add&#39;))</div>
<div class="line">);</div>
<div class="line"> </div>
<div class="line">$options = $this-&gt;options($options, &#39;breadcrumbs&#39;, $bread);</div>
<div class="line"> </div>
<div class="line">$data = $this-&gt;breadcrumbs($data, $options);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md33"></a>
Breadcrumb method</h2>
<div class="fragment"><div class="line">public function breadcrumbs($data, $options) {</div>
<div class="line"> </div>
<div class="line">    $rs = array( </div>
<div class="line">        array(&#39;title&#39; =&gt; &#39;home&#39;, &#39;url&#39;=&gt;array(&#39;profile&#39;,&#39;index&#39;)), </div>
<div class="line">        array(&#39;title&#39; =&gt; &#39;companies&#39;,&#39;url&#39;=&gt;array(&#39;companies&#39;,&#39;index&#39;))</div>
<div class="line">    );</div>
<div class="line">    </div>
<div class="line">    $rs = $this-&gt;bakers($rs, $data, $options);</div>
<div class="line"> </div>
<div class="line">    $rs = $this-&gt;bread($rs,$data,$options);</div>
<div class="line"> </div>
<div class="line">    $data = $this -&gt; spartial($data, __FUNCTION__, $rs);</div>
<div class="line"> </div>
<div class="line">    return $data;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">public function bakers($rs,$data,$options){</div>
<div class="line">    </div>
<div class="line">    $e = &#39;breadcrumbs&#39;;</div>
<div class="line">    </div>
<div class="line">    if(isset($options[$e])){</div>
<div class="line">        </div>
<div class="line">        $rs = array_merge($rs,$options[$e]);</div>
<div class="line">                    </div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    </div>
<div class="line">    return $rs;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">public function bread($rs,$data,$options){</div>
<div class="line"> </div>
<div class="line">    $counter = 0;</div>
<div class="line"> </div>
<div class="line">    while($counter&lt;count($rs)){</div>
<div class="line">    </div>
<div class="line">        $m = $rs[$counter];</div>
<div class="line">        </div>
<div class="line">        $m = $this-&gt;crumbs($m,$data,$options);</div>
<div class="line">        </div>
<div class="line">        $rs[$counter] = $m;</div>
<div class="line">        </div>
<div class="line">        $counter++;</div>
<div class="line">    </div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    return $rs;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">public function crumbs($m,$data,$options){</div>
<div class="line"> </div>
<div class="line">    $el = __FUNCTION__;</div>
<div class="line"> </div>
<div class="line">    $url = $this-&gt;surl($m[&#39;url&#39;]);</div>
<div class="line"> </div>
<div class="line">    $url = $this-&gt;html-&gt;link($url);</div>
<div class="line">    </div>
<div class="line">    $attr = array(</div>
<div class="line">        &#39;href&#39;=&gt;$url,</div>
<div class="line">    );</div>
<div class="line">    </div>
<div class="line">    $attr = $this-&gt;attributes($attr);</div>
<div class="line">    </div>
<div class="line">    $m[$el] = $attr;</div>
<div class="line"> </div>
<div class="line">    return $m;</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md34"></a>
Add session authentication to page</h2>
<div class="fragment"><div class="line">$data = $this-&gt;smodey($data, $models, &#39;documents&#39;, &#39;powerpack&#39;,$options);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md35"></a>
Add to Controller</h2>
<div class="fragment"><div class="line">$models = array(</div>
<div class="line">    &#39;home&#39; =&gt; &#39;HomeModel&#39;,</div>
<div class="line">    &#39;profile&#39;=&gt;&#39;ProfileModel&#39;,</div>
<div class="line">    &#39;documents&#39;=&gt;&#39;DocumentsModel&#39;</div>
<div class="line">);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md36"></a>
Add navigation and side bar</h2>
<div class="fragment"><div class="line">$data = $this-&gt;smodelfn($data, $models, &#39;profile&#39;,&#39;nav&#39;,$options);</div>
<div class="line"> </div>
<div class="line">$data = $this-&gt;smodelfn($data, $models, &#39;profile&#39;,&#39;side&#39;,$options);</div>
<div class="line"> </div>
<div class="line">$data = $this-&gt;smodelfn($data, $models, &#39;profile&#39;,&#39;admin&#39;,$options);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md37"></a>
Db total records</h2>
<p>*Note remember to add relevant models to controller</p>
<div class="fragment"><div class="line">public function total($data,$options){</div>
<div class="line">    </div>
<div class="line">    $key = __FUNCTION__;</div>
<div class="line"> </div>
<div class="line">    $value = &quot;&quot;;</div>
<div class="line">    </div>
<div class="line">    $conditions = array(</div>
<div class="line">        &#39;table&#39;=&gt;&#39;xmen_users&#39;</div>
<div class="line">    );</div>
<div class="line">    </div>
<div class="line">    $rs = $this-&gt;db-&gt;total($conditions);</div>
<div class="line"> </div>
<div class="line">    $data = $this-&gt;sdata($data, $key, $value);</div>
<div class="line">    </div>
<div class="line">    return $data;</div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md38"></a>
Db SUM() functionality</h1>
<div class="fragment"><div class="line">$conditions = array(</div>
<div class="line">    &#39;table&#39;=&gt;&#39;horizon_bereavement_expenses&#39;,</div>
<div class="line">    &#39;wheres&#39;=&gt;$wheres,</div>
<div class="line">    &#39;sum&#39;=&gt;array(</div>
<div class="line">        &#39;col&#39;=&gt;&#39;amount&#39;,</div>
<div class="line">        &#39;name&#39;=&gt;&#39;total&#39;</div>
<div class="line">    )</div>
<div class="line">);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md39"></a>
Load conditions from InitModel</h2>
<p>*Note remember to add relevant models to controller</p>
<div class="fragment"><div class="line">$options = $this-&gt;options($options, &#39;collar&#39;, &#39;xmen_portfolio&#39;);</div>
<div class="line"> </div>
<div class="line">$data = $models[&#39;scrape&#39;]-&gt;table($data,$models,$options);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md40"></a>
sform</h2>
<div class="fragment"><div class="line">public function sform($data, $options) {</div>
<div class="line"> </div>
<div class="line">    $url = array(&#39;signin&#39;, &#39;create&#39;);</div>
<div class="line"> </div>
<div class="line">    //$url = $this -&gt; normal($url, $data, $options);</div>
<div class="line"> </div>
<div class="line">    $url = $this -&gt; surl($url);</div>
<div class="line"> </div>
<div class="line">    $options = $this -&gt; options($options, &#39;protocol&#39;, &#39;HTTPS&#39;);</div>
<div class="line"> </div>
<div class="line">    $url = $this -&gt; html -&gt; link($url, $options);</div>
<div class="line"> </div>
<div class="line">    $attr = array(&#39;method&#39; =&gt; &#39;POST&#39;, &#39;id&#39; =&gt; __FUNCTION__, &#39;name&#39; =&gt; __FUNCTION__, &#39;class&#39; =&gt; &quot;form-signin&quot;, &#39;action&#39; =&gt; $url);</div>
<div class="line"> </div>
<div class="line">    $attr = $this -&gt; attributes($attr);</div>
<div class="line"> </div>
<div class="line">    $data = $this -&gt; template($data, __FUNCTION__, $attr);</div>
<div class="line"> </div>
<div class="line">    return $data;</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md41"></a>
File input Attribute method</h2>
<p>** Use the default attribute to pass value without key pair</p>
<div class="fragment"><div class="line">public function pict($data,$options){</div>
<div class="line">    </div>
<div class="line">    $attr = array(</div>
<div class="line">        &#39;name&#39;=&gt;__FUNCTION__,</div>
<div class="line">        &#39;type&#39;=&gt;&#39;file&#39;,</div>
<div class="line">        &#39;id&#39;=&gt;__FUNCTION__,</div>
<div class="line">        &#39;class&#39;=&gt;__FUNCTION__,</div>
<div class="line">        &#39;data-type&#39;=&gt;__FUNCTION__,</div>
<div class="line">        &#39;default&#39;=&gt;&#39;multiple&#39;</div>
<div class="line">    );</div>
<div class="line">    </div>
<div class="line">    $attr = $this-&gt;attributes($attr);</div>
<div class="line">    </div>
<div class="line">    $data = $this-&gt;template($data, __FUNCTION__, $attr);</div>
<div class="line">    </div>
<div class="line">    return $data;</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md42"></a>
sform url</h2>
<div class="fragment"><div class="line">$normal = array(&#39;kuwahara&#39;,&#39;resume&#39;,$data[&#39;id&#39;]);</div>
<div class="line"> </div>
<div class="line">$options = $this-&gt;options($options, &#39;normal&#39;,$normal);</div>
<div class="line"> </div>
<div class="line">public function normal($url, $data, $options){</div>
<div class="line">    </div>
<div class="line">    if(isset($options[__FUNCTION__])){</div>
<div class="line">        </div>
<div class="line">        $url = $options[__FUNCTION__];</div>
<div class="line">        </div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    return $url;</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md43"></a>
Alias partial element functionality</h2>
<div class="fragment"><div class="line">public function alias($m,$data,$options){</div>
<div class="line">            </div>
<div class="line">    foreach ($m as $key =&gt; $value) {</div>
<div class="line">        </div>
<div class="line">        if(isset($m[&#39;alias&#39;][$key])){</div>
<div class="line">            </div>
<div class="line">            $m[$key] = $m[&#39;alias&#39;][$key];</div>
<div class="line">            </div>
<div class="line">        }</div>
<div class="line">                    </div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    return $m;</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md44"></a>
Url attributes</h2>
<div class="fragment"><div class="line">$url = array(</div>
<div class="line">  &#39;profile&#39;,</div>
<div class="line">  &#39;contacts&#39;</div>
<div class="line">);</div>
<div class="line"> </div>
<div class="line">$url = $this-&gt;surl($url);</div>
<div class="line"> </div>
<div class="line">$url = $this-&gt;html-&gt;link($url,$options);</div>
<div class="line"> </div>
<div class="line">$attr = array(</div>
<div class="line">  &#39;href&#39;=&gt;$url</div>
<div class="line">);</div>
<div class="line"> </div>
<div class="line">$attr = $this-&gt;attributes($attr);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md45"></a>
Flash with url</h2>
<div class="fragment"><div class="line">public function portfolio_flash_share($data,$options){</div>
<div class="line">    </div>
<div class="line">    $id = $this-&gt;session-&gt;read(array(&#39;portfolio_resolution&#39;));</div>
<div class="line">    </div>
<div class="line">    if(isset($id) &amp;&amp; !empty($id)){</div>
<div class="line">        </div>
<div class="line">        $url = array(</div>
<div class="line">            &#39;profile&#39;,</div>
<div class="line">            &#39;portfolio&#39;,</div>
<div class="line">            &#39;guest&#39;,</div>
<div class="line">            $id</div>
<div class="line">        );</div>
<div class="line">        </div>
<div class="line">        $url = $this-&gt;surl($url);</div>
<div class="line">        </div>
<div class="line">        $url = $this-&gt;html-&gt;link($url);</div>
<div class="line">        </div>
<div class="line">        $attr = array(</div>
<div class="line">            &#39;href&#39;=&gt;$url,</div>
<div class="line">            &#39;target&#39;=&gt;&#39;_blank&#39;</div>
<div class="line">        );</div>
<div class="line">        </div>
<div class="line">        $attr = $this-&gt;attributes($attr);</div>
<div class="line">        </div>
<div class="line">        $options = $this-&gt;options($options, &#39;attr&#39;, $attr);</div>
<div class="line">        </div>
<div class="line">        $txt = &#39;Share your portfolio with this link&#39;;</div>
<div class="line">        </div>
<div class="line">        $msg = $this-&gt;html-&gt;hyper($txt,$options);</div>
<div class="line">        </div>
<div class="line">        $flash = &#39;info&#39;;</div>
<div class="line">                        </div>
<div class="line">        $data = $this-&gt;flash($data,$msg,$flash);</div>
<div class="line">        </div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    </div>
<div class="line">    return $data;</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md46"></a>
CSS Page Style</h2>
<div class="fragment"><div class="line">$data = $this-&gt;smodey($data, $models, &#39;talktoshirley&#39;, &#39;pagestyle&#39;,$options);</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md47"></a>
Load CSS</h1>
<div class="fragment"><div class="line">HTTP://sandbox.typekoce.com/resources/cssstyle/font-awesome-4.7.0/css/font-awesome.css</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md48"></a>
Facebook response</h2>
<div class="fragment"><div class="line">https://typekoce.com/signin/update?code=AQAXrA9-grGtEoTtRIaVMHDGdlokmYRdBiUM67CT0aSL-iH8Jvj0oxyXHnvsufKibrLwRKEz9LdKpqIPjYb7BwIbuk3gGDM13td5-Owb_t_9NNOHcnrF0XNGcszJsV07nBcAcG70m4fVh1KP-X565q39UcJOrQhy3kBcmxoONRKAyGySlMg9fkNp-C1pPCyip9NaqgjKYY2dEaJH_ZIvBJU1MA6Bg69plnp55rMTzCSkJc-poW57QHI2XO6WchP47ZSSQe2PG7tML_JEs-Ans1t6Sz-l-GBIieNQmr9qDMF6ikjNNXE-CNEMRHNPfd33ByQ&amp;state=d9ddc1f23a0bc0c252d38023998aca51#_=_</div>
<div class="line"> </div>
<div class="line">https://www.facebook.com/v2.10/dialog/oauth?client_id=1000275760363846&amp;state=618629aeef8c3f06b0fd5e3393db910f&amp;response_type=code&amp;sdk=php-sdk-5.7.0&amp;redirect_uri=HTTPS%3A%2F%2Ftypekoce.com%2Fsignin%2Fupdate&amp;scope=email</div>
<div class="line"> </div>
<div class="line">* Cosmina is great!</div>
<div class="line"> </div>
<div class="line">redirect_uri=HTTPS://typekoce.com/signin/update&amp;scope=email</div>
<div class="line"> </div>
<div class="line">* McNair</div>
<div class="line"> </div>
<div class="line">https://dev.typekoce.com/signin/update&amp;scope=email</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md49"></a>
set flash</h2>
<div class="fragment"><div class="line">$data = $this-&gt;flash($data,&#39;Login error&#39;,&#39;danger&#39;);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md50"></a>
Setting options</h2>
<p>*** Note overwriting the same key may have unpredictable results***</p>
<div class="fragment"><div class="line">$options = $this-&gt;options($options,&#39;foo&#39;,&#39;bar&#39;);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md51"></a>
Creating a ssl form</h2>
<p>** Note no remote links on ssl page ie: <a href="http:getbootstrap.com/">http:getbootstrap.com/</a></p>
<div class="fragment"><div class="line">$options = $this-&gt;options($options,&#39;protocol&#39;,&#39;HTTPS&#39;);</div>
<div class="line"> </div>
<div class="line">$url = $this-&gt;html-&gt;link(&#39;model/action/&#39;$options);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md52"></a>
Adding attributes</h2>
<ul>
<li>Remember to pass the <div class="fragment"><div class="line">$options[&#39;form&#39;] = TRUE;</div>
<div class="line"> </div>
<div class="line">$attr = $this-&gt;attributes($attr,$options);</div>
</div><!-- fragment --></li>
</ul>
<h2><a class="anchor" id="autotoc_md53"></a>
Adding custom route</h2>
<ul>
<li>Note to by pass app routing call controller home and passthrough method</li>
<li>Add to app/core/Routes.php <div class="fragment"><div class="line">$this-&gt;domain(&#39;sandbox.typekoce.com&#39;, &#39;signin&#39;, &#39;read&#39;, &#39;read&#39;);</div>
</div><!-- fragment --></li>
</ul>
<h2><a class="anchor" id="autotoc_md54"></a>
Filtering partials</h2>
<p>** Pass option </p><div class="fragment"><div class="line">$options = $this-&gt;options($options, &#39;impression&#39;, &#39;businessplangoals&#39;);</div>
</div><!-- fragment --><div class="fragment"><div class="line">public function impression($data,$options){</div>
<div class="line"> </div>
<div class="line">    $key = $options[__FUNCTION__];</div>
<div class="line">    </div>
<div class="line">    $rs = $this-&gt;gpartial($data,$key);</div>
<div class="line">    </div>
<div class="line">    $counter = 0;</div>
<div class="line">    </div>
<div class="line">    while($counter&lt;count($rs)){</div>
<div class="line">    </div>
<div class="line">        $m = $rs[$counter];</div>
<div class="line"> </div>
<div class="line">        new dBug($m);</div>
<div class="line"> </div>
<div class="line">        $counter++;</div>
<div class="line">    </div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    $data = $this-&gt;repartial($data,$key,$rs);</div>
<div class="line">    </div>
<div class="line">    return $data;</div>
<div class="line">}</div>
</div><!-- fragment --><ul>
<li>Atttributes for partial <div class="fragment"><div class="line">public function businessattr($m,$data,$options){</div>
<div class="line">    </div>
<div class="line">    $key = __FUNCTION__;</div>
<div class="line">    </div>
<div class="line">    $attr = array(</div>
<div class="line">        &#39;data-type&#39;=&gt;$key</div>
<div class="line">    );</div>
<div class="line">    </div>
<div class="line">    $attr = $this-&gt;attributes($attr);</div>
<div class="line">    </div>
<div class="line">    $m[$key] = $attr;</div>
<div class="line">    </div>
<div class="line">    return $m;</div>
<div class="line">}</div>
</div><!-- fragment --></li>
</ul>
<h2><a class="anchor" id="autotoc_md55"></a>
Loading images as a resource</h2>
<ul>
<li>Place image in theme folder then use the url starting with resources/image</li>
<li>This will request the image via the resources/image controllers</li>
<li>Functionality can be created to track images in emails, pdf, etc.</li>
</ul>
<div class="fragment"><div class="line">$logo = $this-&gt;html-&gt;link(&#39;resources/image/bar480/images/hex.png&#39;);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md56"></a>
Controller</h2>
<div class="fragment"><div class="line">public function index($id = &#39;&#39;){</div>
<div class="line"> </div>
<div class="line">  $controller = new Controller();</div>
<div class="line"> </div>
<div class="line">  $data = array(</div>
<div class="line">    &#39;id&#39;=&gt;$id,</div>
<div class="line">    &#39;directive&#39;=&gt;__FUNCTION__</div>
<div class="line">  );</div>
<div class="line"> </div>
<div class="line">  $data = $controller-&gt;slug($data);</div>
<div class="line"> </div>
<div class="line">  $model = array(</div>
<div class="line">    __CLASS__=&gt;__CLASS__ . &#39;Model&#39;,</div>
<div class="line">    &#39;home&#39;=&gt;&#39;HomeModel&#39;</div>
<div class="line">  );</div>
<div class="line"> </div>
<div class="line">  $models = $controller-&gt;model($model);</div>
<div class="line"> </div>
<div class="line">  $data = $models[__CLASS__]-&gt;init($data,$models);</div>
<div class="line"> </div>
<div class="line">  $controller-&gt;view(__CLASS__ . &#39;/&#39; . __FUNCTION__,$data);</div>
<div class="line"> </div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md57"></a>
Model</h2>
<div class="fragment"><div class="line">public function index($data,$options){</div>
<div class="line"> </div>
<div class="line">  if(isset($data[&#39;directive&#39;]) &amp;&amp; $data[&#39;directive&#39;] === __FUNCTION__){</div>
<div class="line"> </div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  return $data;</div>
<div class="line"> </div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md58"></a>
Bind all data to $data array</h2>
<div class="fragment"><div class="line">$data = $this-&gt;sdata($data,&#39;w&#39;,40);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md59"></a>
loading libraries</h2>
<div class="fragment"><div class="line">$file = &#39;phpseclib/Net/SSH2.php&#39;;</div>
<div class="line"> </div>
<div class="line">$this-&gt;lib($file);</div>
<div class="line"> </div>
<div class="line">$ssh = new Net_SSH2($data[&#39;id&#39;]);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md60"></a>
controller set-up for loading multiple models</h2>
<div class="fragment"><div class="line">$model = array(</div>
<div class="line">  __CLASS__=&gt;__CLASS__ . &#39;Model&#39;,</div>
<div class="line">  &#39;home&#39;=&gt;&#39;HomeModel&#39;,</div>
<div class="line">  &#39;profile&#39;=&gt;&#39;ProfileModel&#39;</div>
<div class="line">);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md61"></a>
loading model functions</h2>
<div class="fragment"><div class="line">$data = $this-&gt;smodelfn($data,$models,&#39;profile&#39;,&#39;gateway&#39;);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md62"></a>
loading model data from another model</h2>
<div class="fragment"><div class="line">public function gdatas($data,$models,$options){</div>
<div class="line"> </div>
<div class="line">  $datas = array(</div>
<div class="line">    &#39;id&#39;=&gt;1,</div>
<div class="line">    &#39;directive&#39;=&gt;&#39;cv&#39;,</div>
<div class="line">    __FUNCTION__=&gt;$data</div>
<div class="line">  );</div>
<div class="line"> </div>
<div class="line">  $datas = $models[&#39;home&#39;]-&gt;init($datas,$models,$options);</div>
<div class="line"> </div>
<div class="line">  $data = $this-&gt;sdata($data,__FUNCTION__,$datas);</div>
<div class="line"> </div>
<div class="line">  return $data;</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md63"></a>
Creating partial</h2>
<div class="fragment"><div class="line">public function plans($data, $options) {</div>
<div class="line"> </div>
<div class="line">    $rs = array( </div>
<div class="line">        array(&#39;title&#39; =&gt; &#39;Update&#39;, &#39;icon&#39; =&gt; &#39;file&#39;), </div>
<div class="line">        array(&#39;title&#39; =&gt; &#39;Products&#39;, &#39;icon&#39; =&gt; &#39;shopping-cart&#39;)</div>
<div class="line">    );</div>
<div class="line"> </div>
<div class="line">    $data = $this -&gt; spartial($data, __FUNCTION__, $rs);</div>
<div class="line"> </div>
<div class="line">    return $data;</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md64"></a>
Processing partial</h2>
<div class="fragment"><div class="line">public function plans($data, $options) {</div>
<div class="line"> </div>
<div class="line">    $rs = array( </div>
<div class="line">        array(</div>
<div class="line">            &#39;title&#39; =&gt; &#39;Professional Subscriptions&#39;, </div>
<div class="line">            &#39;modify&#39; =&gt; &#39;modify&#39;,</div>
<div class="line">            &#39;status&#39;=&gt;&#39;active&#39;,</div>
<div class="line">            &#39;link&#39;=&gt;&#39;&#39;</div>
<div class="line">        ), </div>
<div class="line">    );</div>
<div class="line"> </div>
<div class="line">    $rs = $this-&gt;button($rs,$data,$options);</div>
<div class="line"> </div>
<div class="line">    $data = $this -&gt; spartial($data, __FUNCTION__, $rs);</div>
<div class="line"> </div>
<div class="line">    return $data;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">public function but($m,$data,$options){</div>
<div class="line"> </div>
<div class="line">    $el = __FUNCTION__;</div>
<div class="line"> </div>
<div class="line">    new dBug($m);</div>
<div class="line"> </div>
<div class="line">    return $m;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">public function button($rs,$data,$options){</div>
<div class="line"> </div>
<div class="line">    $counter = 0;</div>
<div class="line"> </div>
<div class="line">    while($counter&lt;count($rs)){</div>
<div class="line">    </div>
<div class="line">        $m = $rs[$counter];</div>
<div class="line">        </div>
<div class="line">        $m = $this-&gt;but($m,$data,$options);</div>
<div class="line">        </div>
<div class="line">        $rs[$counter] = $m;</div>
<div class="line">        </div>
<div class="line">        $counter++;</div>
<div class="line">    </div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    return $rs;</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md65"></a>
Save Many</h2>
<ul>
<li>Save many function</li>
</ul>
<div class="fragment"><div class="line">    $conditions = array();</div>
<div class="line"> </div>
<div class="line">    $date = $this-&gt;timewarp-&gt;now();</div>
<div class="line"> </div>
<div class="line">    $fields = array(</div>
<div class="line">        &#39;Chorlton Cobblers&#39;=&gt;&#39;Tea &amp;amp; Sticky shoes&#39;,</div>
<div class="line">        &#39;Chorlton Ye Olde Cake Shoppe&#39;=&gt;&#39;Tea &amp;amp; Sticky Cakes&#39;,</div>
<div class="line">        &#39;Chorlton Ye Olde Computer Repair&#39;=&gt;&#39;New fanglled technology&#39;</div>
<div class="line">    );</div>
<div class="line"> </div>
<div class="line">    foreach ($fields as $title =&gt; $description) {</div>
<div class="line"> </div>
<div class="line">        $save = array(</div>
<div class="line">            &#39;title&#39; =&gt; $title,</div>
<div class="line">            &#39;description&#39; =&gt; $description,</div>
<div class="line">            &#39;date&#39;=&gt;$date,</div>
<div class="line">            &#39;status&#39;=&gt;1</div>
<div class="line">        );</div>
<div class="line"> </div>
<div class="line">        $conditions[] = array(</div>
<div class="line">            &#39;table&#39; =&gt; $data[&#39;tbl_businesses&#39;],</div>
<div class="line">            &#39;save&#39; =&gt; $save,</div>
<div class="line">        );</div>
<div class="line"> </div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    new dBug($rs = $this-&gt;db-&gt;savem($conditions));</div>
<div class="line"> </div>
<div class="line">$this-&gt;db-&gt;savem($conditions);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md66"></a>
Update data</h2>
<div class="fragment"><div class="line">$update =array(</div>
<div class="line">    &#39;status&#39;=&gt;1</div>
<div class="line">);</div>
<div class="line"> </div>
<div class="line">$conditions = array(</div>
<div class="line">  &#39;table&#39;=&gt;&#39;xmen_users&#39;,</div>
<div class="line">  &#39;update&#39;=&gt;$update,</div>
<div class="line">  &#39;where&#39;=&gt;array(</div>
<div class="line">    &#39;id&#39;=&gt;$this-&gt;session-&gt;read(array(&#39;profile&#39;,&#39;id&#39;))</div>
<div class="line">  )</div>
<div class="line">);</div>
<div class="line"> </div>
<div class="line">new dBug($this-&gt;db-&gt;update($conditions));</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md67"></a>
Multiple Update</h3>
<div class="fragment"><div class="line">$conditions = array();</div>
<div class="line">            </div>
<div class="line">$counter = 0;</div>
<div class="line"> </div>
<div class="line">while($counter&lt;count($rs)){</div>
<div class="line">    </div>
<div class="line">    $status = 0;</div>
<div class="line">    </div>
<div class="line">    if($rs[$counter][&#39;id&#39;] === $data[&#39;id&#39;]){</div>
<div class="line">        </div>
<div class="line">        $status = 1;</div>
<div class="line">        </div>
<div class="line">    }</div>
<div class="line">                    </div>
<div class="line">    $condition = array(</div>
<div class="line">        &#39;table&#39;=&gt;$data[&#39;tbl&#39;],</div>
<div class="line">        &#39;update&#39;=&gt;array(</div>
<div class="line">            &#39;status&#39;=&gt;$status</div>
<div class="line">        ),</div>
<div class="line">        &#39;where&#39;=&gt;array(</div>
<div class="line">            &#39;id&#39;=&gt;$rs[$counter][&#39;id&#39;]</div>
<div class="line">        )</div>
<div class="line">    );</div>
<div class="line">    </div>
<div class="line">    $conditions[] = $condition;</div>
<div class="line">    </div>
<div class="line">    $counter++;</div>
<div class="line">    </div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">new dBug($res = $this-&gt;db-&gt;mupdate($conditions));</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md68"></a>
Find like</h2>
<div class="fragment"><div class="line">$conditions = array(</div>
<div class="line">    &#39;table&#39;=&gt;$data[&#39;tbl&#39;],</div>
<div class="line">    &#39;like&#39;=&gt;array(</div>
<div class="line">        &#39;col&#39;=&gt;&#39;title&#39;,</div>
<div class="line">        &#39;val&#39;=&gt;$_POST[&#39;search&#39;]</div>
<div class="line">    )</div>
<div class="line">);</div>
<div class="line"> </div>
<div class="line">$rs = $this-&gt;db-&gt;find($conditions);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md69"></a>
Find data</h2>
<div class="fragment"><div class="line">$conditions = array(</div>
<div class="line">    &#39;table&#39; =&gt; &#39;xmen_cv&#39;, </div>
<div class="line">    &#39;where&#39; =&gt; array(</div>
<div class="line">        &#39;col&#39; =&gt; &#39;content&#39;, </div>
<div class="line">        &#39;val&#39; =&gt; $this -&gt; db -&gt; string($uid)</div>
<div class="line">    )</div>
<div class="line">);</div>
<div class="line"> </div>
<div class="line">$rs = $this -&gt; db -&gt; find($conditions);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md70"></a>
Find data with specific field names</h2>
<div class="fragment"><div class="line">$wheres = array(</div>
<div class="line">    &#39;id&#39;=&gt;$data[&#39;id&#39;]</div>
<div class="line">);</div>
<div class="line"> </div>
<div class="line">$conditions = array(</div>
<div class="line">    &#39;table&#39;=&gt;&#39;migrate_lesson_plans&#39;,</div>
<div class="line">    &#39;wheres&#39;=&gt;$wheres,</div>
<div class="line">    &#39;field_names&#39;=&gt;array(</div>
<div class="line">        &#39;aims&#39;,</div>
<div class="line">        &#39;aims_1&#39;</div>
<div class="line">    )</div>
<div class="line">);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md71"></a>
Find data with where and</h2>
<div class="fragment"><div class="line">$wheres = array(</div>
<div class="line">    &#39;date&#39;=&gt;date(&quot;Y-m-d h:i:s&quot;, $d),</div>
<div class="line">    &#39;sender&#39;=&gt;$m[&#39;sender&#39;]</div>
<div class="line">);</div>
<div class="line"> </div>
<div class="line">$conditions = array(</div>
<div class="line">    &#39;table&#39;=&gt;&#39;xmen_email_responder&#39;,</div>
<div class="line">    &#39;wheres&#39;=&gt;$wheres</div>
<div class="line">);</div>
<div class="line"> </div>
<div class="line">$rs = $this-&gt;db-&gt;find($conditions);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md72"></a>
Find data with and or</h2>
<div class="fragment"><div class="line">$wheres = array(</div>
<div class="line">    &#39;or&#39;=&gt;array(</div>
<div class="line">        &#39;status&#39;=&gt;array(2),</div>
<div class="line">    ),</div>
<div class="line">    &#39;status&#39;=&gt;1</div>
<div class="line">);</div>
<div class="line"> </div>
<div class="line">$conditions = array(</div>
<div class="line">    &#39;table&#39;=&gt;&#39;migrate_lesson_todo&#39;,</div>
<div class="line">    &#39;order&#39;=&gt;array(&#39;id&#39;=&gt;&#39;desc&#39;),</div>
<div class="line">    &#39;wheres&#39;=&gt;$wheres</div>
<div class="line">);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md73"></a>
Find data with json decode</h2>
<div class="fragment"><div class="line">$wheres = array(</div>
<div class="line">    &#39;date&#39;=&gt;date(&quot;Y-m-d h:i:s&quot;, $d),</div>
<div class="line">    &#39;sender&#39;=&gt;$m[&#39;sender&#39;]</div>
<div class="line">);</div>
<div class="line"> </div>
<div class="line">$conditions = array(</div>
<div class="line">    &#39;table&#39;=&gt;&#39;xmen_email_responder&#39;,</div>
<div class="line">    &#39;wheres&#39;=&gt;$wheres,,</div>
<div class="line">    &#39;json&#39;=&gt;array(</div>
<div class="line">        &#39;pref&#39;=&gt;&#39;log&#39;</div>
<div class="line">    )</div>
<div class="line">);</div>
<div class="line"> </div>
<div class="line">$rs = $this-&gt;db-&gt;find($conditions);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md74"></a>
Find data with field alias</h2>
<div class="fragment"><div class="line">$conditions = array(</div>
<div class="line">    &#39;table&#39; =&gt; &#39;xmen_upload&#39;, </div>
<div class="line">    &#39;where&#39; =&gt; array(</div>
<div class="line">        &#39;col&#39; =&gt; &#39;folder&#39;, </div>
<div class="line">        &#39;val&#39; =&gt; $this -&gt; db -&gt; string($uid)</div>
<div class="line">    ),</div>
<div class="line">    &#39;as&#39;=&gt;array(</div>
<div class="line">        &#39;course&#39;=&gt;&#39;title&#39;,</div>
<div class="line">        &#39;accreditation&#39;=&gt;&#39;level&#39;</div>
<div class="line">    )</div>
<div class="line">);</div>
<div class="line"> </div>
<div class="line">$rs = $this -&gt; db -&gt; find($conditions);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md75"></a>
Find data INNER JOIN example</h2>
<ul>
<li>Add line of code after consitions <div class="fragment"><div class="line">$conditions = $this-&gt;recordjoins($data, $conditions, $options);</div>
</div><!-- fragment --></li>
</ul>
<div class="fragment"><div class="line">public function recordjoins($data,$conditions,$options){</div>
<div class="line">    //@TODO: Remove condition if not needed!</div>
<div class="line">    if(!empty($data[&#39;bizid&#39;]) &amp;&amp; !empty($data[&#39;page&#39;])){</div>
<div class="line">        </div>
<div class="line">        $conditions[&#39;joins&#39;]=array(                     </div>
<div class="line">            array(</div>
<div class="line">                &#39;type&#39;=&gt;&#39;INNER&#39;,</div>
<div class="line">                &#39;on&#39;=&gt;array(</div>
<div class="line">                    &#39;tbl1&#39;=&gt;&#39;content&#39;,</div>
<div class="line">                    &#39;tbl2&#39;=&gt;&#39;id&#39;</div>
<div class="line">                ),</div>
<div class="line">                &#39;table&#39;=&gt;&#39;biz_registration&#39;,</div>
<div class="line">                &#39;fields&#39;=&gt;array(</div>
<div class="line">                    &#39;id&#39;=&gt;&#39;biz_id&#39;,</div>
<div class="line">                    &#39;userid&#39;=&gt;&#39;biz_userid&#39;,</div>
<div class="line">                    &#39;title&#39;=&gt;&#39;biz_title&#39;,</div>
<div class="line">                    &#39;description&#39;=&gt;&#39;biz_description&#39;,</div>
<div class="line">                    &#39;status&#39;=&gt;&#39;biz_status&#39;</div>
<div class="line">                )</div>
<div class="line">            ),                          </div>
<div class="line">        );          </div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    return $conditions;</div>
<div class="line">    </div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md76"></a>
Joins Many</h1>
<div class="fragment"><div class="line">&lt;?php</div>
<div class="line"> </div>
<div class="line">// Assuming DB_HOST, DB_USER, DB_PASSWORD, DB_NAME are defined globally</div>
<div class="line">// in your application&#39;s configuration (e.g., config.php)</div>
<div class="line"> </div>
<div class="line">require_once &#39;App/Core/Db.php&#39;; // Adjust path as per your project structure</div>
<div class="line"> </div>
<div class="line">use App\Core\Db;</div>
<div class="line"> </div>
<div class="line">$db = new Db();</div>
<div class="line"> </div>
<div class="line">$conditions = [</div>
<div class="line">    &#39;table&#39; =&gt; &#39;users&#39;, // Main table</div>
<div class="line">    &#39;joins_many&#39; =&gt; [</div>
<div class="line">        [</div>
<div class="line">            &#39;type&#39; =&gt; &#39;LEFT&#39;,</div>
<div class="line">            &#39;table&#39; =&gt; &#39;products&#39;,</div>
<div class="line">            &#39;on&#39; =&gt; [</div>
<div class="line">                &#39;id&#39; =&gt; &#39;user_id&#39; // users.id = products.user_id</div>
<div class="line">            ]</div>
<div class="line">        ],</div>
<div class="line">        [</div>
<div class="line">            &#39;type&#39; =&gt; &#39;INNER&#39;,</div>
<div class="line">            &#39;table&#39; =&gt; &#39;carts&#39;,</div>
<div class="line">            &#39;on&#39; =&gt; [</div>
<div class="line">                &#39;id&#39; =&gt; &#39;user_id&#39; // users.id = carts.user_id</div>
<div class="line">            ]</div>
<div class="line">        ],</div>
<div class="line">        [</div>
<div class="line">            &#39;type&#39; =&gt; &#39;LEFT&#39;,</div>
<div class="line">            &#39;table&#39; =&gt; &#39;orders&#39;,</div>
<div class="line">            &#39;on&#39; =&gt; [</div>
<div class="line">                &#39;id&#39; =&gt; &#39;cart_id&#39;, // carts.id = orders.cart_id (This assumes cart_id in orders refers to carts.id)</div>
<div class="line">            ]</div>
<div class="line">        ]</div>
<div class="line">    ],</div>
<div class="line">    &#39;fields&#39; =&gt; [</div>
<div class="line">        &#39;users.name&#39; =&gt; &#39;user_name&#39;,</div>
<div class="line">        &#39;products.name&#39; =&gt; &#39;product_name&#39;,</div>
<div class="line">        &#39;products.price&#39; =&gt; &#39;product_price&#39;,</div>
<div class="line">        &#39;orders.quantity&#39; =&gt; &#39;order_quantity&#39;</div>
<div class="line">    ],</div>
<div class="line">    &#39;limit&#39; =&gt; 10</div>
<div class="line">];</div>
<div class="line"> </div>
<div class="line">$result = $db-&gt;find($conditions);</div>
<div class="line"> </div>
<div class="line">if ($result[&#39;success&#39;]) {</div>
<div class="line">    echo &quot;Query executed successfully.\n&quot;;</div>
<div class="line">    echo &quot;Generated SQL:\n&quot; . $result[&#39;sql&#39;] . &quot;\n\n&quot;;</div>
<div class="line">    echo &quot;Results:\n&quot;;</div>
<div class="line">    print_r($result[&#39;result&#39;]);</div>
<div class="line">} else {</div>
<div class="line">    echo &quot;Query failed: &quot; . $result[&#39;error&#39;] . &quot;\n&quot;;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">?&gt;</div>
<div class="line">Generated SQL (simplified for clarity):</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">SELECT</div>
<div class="line">    users.`id`,</div>
<div class="line">    users.`name` AS user_name,</div>
<div class="line">    products.`name` AS product_name,</div>
<div class="line">    products.`price` AS product_price,</div>
<div class="line">    orders.`quantity` AS order_quantity</div>
<div class="line">FROM `users`</div>
<div class="line">LEFT JOIN `products` ON users.`id` = `products`.`user_id`</div>
<div class="line">INNER JOIN `carts` ON users.`id` = `carts`.`user_id`</div>
<div class="line">LEFT JOIN `orders` ON carts.`id` = `orders`.`cart_id`</div>
<div class="line">LIMIT 10;</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md77"></a>
Find data with count</h2>
<div class="fragment"><div class="line">$conditions = array(</div>
<div class="line">    &#39;table&#39;=&gt;&#39;horizon_bereavement_expenses&#39;,</div>
<div class="line">    &#39;subquery_count&#39;=&gt;array(</div>
<div class="line">        &#39;col&#39;=&gt;&#39;id&#39;,</div>
<div class="line">        &#39;name&#39;=&gt;&#39;total_rows&#39;</div>
<div class="line">    )</div>
<div class="line">);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md78"></a>
Email template</h2>
<div class="fragment"><div class="line">http://sandbox.typekoce.com/email/index</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md79"></a>
Post data purified</h2>
<div class="fragment"><div class="line">$this-&gt;request-&gt;purity();</div>
<div class="line"> </div>
<div class="line">$this-&gt;request-&gt;data[&#39;post&#39;];</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md80"></a>
Post Advance datas</h2>
<div class="fragment"><div class="line">$this-&gt;request-&gt;post();</div>
<div class="line"> </div>
<div class="line">new dBug($this-&gt;request-&gt;data);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md81"></a>
Phpseclib</h2>
<p>1.0</p>
<p>Download from <a href="http://phpseclib.sourceforge.net/">http://phpseclib.sourceforge.net/</a></p>
<p>1.1 Copy files to /app/lib/</p>
<p>1.2</p>
<p>1.3 Install PEAR wget <a href="http://pear.php.net/go-pear.phar">http://pear.php.net/go-pear.phar</a> $ php go-pear.phar</p>
<p>apt-get install php5-pgsql php-pear pear channel-discover phpseclib.sourceforge.net sudo pear remote-list -c phpseclib pear install phpseclib/Net_SSH2 service nginx restart</p>
<h2><a class="anchor" id="autotoc_md82"></a>
TODO</h2>
<ul>
<li>SSL</li>
<li>attributes</li>
<li>Scaffold</li>
</ul>
<h2><a class="anchor" id="autotoc_md83"></a>
Test domain (local machine)</h2>
<ul>
<li>sandbox.typekoce.com</li>
<li><a href="http://sandbox.typekoce.com/home/cv">http://sandbox.typekoce.com/home/cv</a></li>
<li><a href="http://sandbox.typekoce.com/cv/read/1">http://sandbox.typekoce.com/cv/read/1</a> </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
